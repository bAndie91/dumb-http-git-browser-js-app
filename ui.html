<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Git HTTP Browser</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  
  <script src="./pako.min.js" sources="https://cdn.jsdelivr.net/npm/pako@2.1.0/dist/pako.min.js"></script>
  <script src="./marked.min.js" sources="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  
  <link rel="stylesheet" href="gitviewer.css" />
  <link rel="stylesheet" href="panes.css" />
  <link rel="stylesheet" href="longlines.css" />
  <link rel="stylesheet" href="commitbox.css" />
  <link rel="stylesheet" href="pod.css" />
  <link rel="stylesheet" href="tree.css" />
</head>

<body>
  <header>
    <input id="repoUrl" size="50" placeholder="https://example.com/repo.git" />
    <button id="loadRepoBtn">Load</button>
    <span id="status"></span>
  </header>

  <div id="app">
    <div id="panes-main" class="panes horizontal">
      <div id="pane-refs" class="pane" data-default-long-lines-display-mode="hscroll">
        <h3>Refs
          <div class="controls"></div>
        </h3>
        <div class="pane-inner">
          <ul id="refs" class="dumbgitviewer"></ul>
        </div>
      </div>
      
      <div class="splitter vertical"></div>
      
      <div class="pane">
        
        <div id="panes-column-log" class="panes vertical">
          <div id="pane-log" class="pane" data-default-long-lines-display-mode="hscroll">
            <h3>Log
              <div class="controls"></div>
            </h3>
            <div id="commits-loader" class="pane-inner">
              <ul id="commits" class="dumbgitviewer hscroll-long-lines"></ul>
            </div>
          </div>
          
          <div class="splitter horizontal"></div>
          
          <div id="pane-commit" class="pane" data-default-long-lines-display-mode="wrap">
            <h3>Commit
              <div class="controls"></div>
            </h3>
            <div id="commitDetails" class="pane-inner">
            </div>
          </div>
        </div>
      </div>
      
      <div class="splitter vertical"></div>
  
      <div id="pane-tree" class="pane" data-default-long-lines-display-mode="hscroll">
        <h3>Tree
          <div class="controls"></div>
        </h3>
        <div class="pane-inner">
          <ul id="tree" class="dumbgitviewer"></ul>
        </div>
      </div>
      
      <div class="splitter vertical"></div>
  
      <div id="pane-file" class="pane" data-default-long-lines-display-mode="wrap">
        <h3>File
          <div class="controls">
            <div id="fileFormatSwitcher" role="radiogroup">
              <button role="radio" aria-checked="true" data-format="raw">raw</button>
              <button role="radio" aria-checked="false" data-format="pod">POD</button>
              <button role="radio" aria-checked="false" data-format="man">man</button>
              <button role="radio" aria-checked="false" data-format="md">MD</button>
            </div>
          </div>
        </h3>
        <div class="pane-inner">
          <div id="dumbgitviewerFile"></div>
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="./ui.js"></script>
  <script type="module" src="./gitviewer.js"></script>

  <template id="long-lines-display-mode-switcher">
     <div class="long-lines-display-mode-switcher" role="radiogroup" aria-label="Text display mode">
       <button role="radio" aria-checked="false" data-mode="ellipsize" title="Ellipsize long lines">…</button>
       <button role="radio" aria-checked="true" data-mode="hscroll" title="Scroll long lines">⇄</button>
       <button role="radio" aria-checked="false" data-mode="wrap" title="Wrap long lines">↵</button>
     </div>
  </template>
  
  <template id="commit-list-item-template">
    <li class="commit-list-item">
    	<span class="commit-datetime"></span>
    	<span class="commit-message-subject"></span>
    </li>
  </template>

  <template id="commit-details-template">
    <div class="commit-headers">
      <div class="commit-header-line commit-hash-line">
        <span class="commit-header">commit</span>
        <span class="commit-hash"></span>
      </div>
      
      <div class="commit-author-equal-committer">
        <div class="commit-header-line commit-author-line">
          <span class="commit-header">Author:</span>
          <span class="commit-author-identity">
            <span class="commit-author-name"></span>
            <span class="commit-author-email"></span>
          </span>
        </div>
      </div>
      
      <div class="commit-author-differ-committer commit-aligned-header-lines">
        <div class="commit-header-line commit-author-line">
          <span class="commit-header">Author:</span>
          <span class="commit-author-identity">
            <span class="commit-author-name"></span>
            <span class="commit-author-email"></span>
          </span>
        </div>
        
        <div class="commit-header-line commit-committer-line">
          <span class="commit-header">Committer:</span>
          <span class="commit-committer-identity">
            <span class="commit-committer-name"></span>
            <span class="commit-committer-email"></span>
          </span>
        </div>
      </div>
      
      <div class="commit-author-date-equal-committer-date">
        <div class="commit-header-line commit-date-line commit-author-date-line">
          <span class="commit-header">Date:</span>
          <span class="commit-author-datetime commit-datetime"></span>
        </div>
      </div>
      
      <div class="commit-author-date-differ-committer-date commit-aligned-header-lines">
        <div class="commit-header-line commit-date-line commit-author-date-line">
          <span class="commit-header">Authored Date:</span>
          <span class="commit-author-datetime commit-datetime"></span>
        </div>
      
        <div class="commit-header-line commit-date-line commit-commit-date-line">
          <span class="commit-header">Commit Date:</span>
          <span class="commit-commit-datetime commit-datetime"></span>
        </div>
      </div>
    </div>
    <div class="commit-message"></div>
  </template>
</body>
</html>
